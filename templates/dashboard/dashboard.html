{% extends "login_base.html" %}
{% block title %}Competitor Tracking - FusionHub{% endblock %}

{% block content %}
<h1 class="text-3xl font-bold text-gray-800 mb-8">ðŸ“¦ Competitor Tracking</h1>

<!-- Top Metrics -->
<div class="grid sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
  <div class="p-6 bg-white rounded-lg shadow text-center">
    <h2 class="text-sm text-gray-500">Total Competitors</h2>
    <p class="text-3xl font-bold text-primary-600">124</p>
  </div>
  <div class="p-6 bg-white rounded-lg shadow text-center">
    <h2 class="text-sm text-gray-500">Auto-Discovered</h2>
    <p class="text-3xl font-bold text-green-600">75</p>
  </div>
  <div class="p-6 bg-white rounded-lg shadow text-center">
    <h2 class="text-sm text-gray-500">Manual Added</h2>
    <p class="text-3xl font-bold text-blue-600">49</p>
  </div>
  <div class="p-6 bg-white rounded-lg shadow text-center">
    <h2 class="text-sm text-gray-500">Price Changes (24h)</h2>
    <p class="text-3xl font-bold text-yellow-500">18</p>
  </div>
</div>

<!-- Product Selector -->
<div class="mb-6">
  <label for="productSelect" class="block text-sm font-medium text-gray-700 mb-2">
    Select Product
  </label>
  <select id="productSelect" class="w-64 px-3 py-2 border rounded-lg focus:ring focus:ring-indigo-500">
    <option>iPhone 15</option>
    <option>Samsung S24</option>
    <option>MacBook Air M3</option>
  </select>
</div>

<!-- Charts -->
<div class="grid lg:grid-cols-2 gap-8 mb-8">
  <div class="p-6 bg-white rounded-lg shadow">
    <h2 class="text-lg font-semibold mb-4">ðŸ“Š Price Trends</h2>
    <div class="h-64">
      <canvas id="priceTrendChart"></canvas>
    </div>
  </div>
  <div class="p-6 bg-white rounded-lg shadow">
    <h2 class="text-lg font-semibold mb-4">ðŸ¥§ Market Share</h2>
    <div class="h-64">
      <canvas id="marketShareChart"></canvas>
    </div>
  </div>
</div>

<!-- Recent Alerts Table -->
<div class="p-6 bg-white rounded-lg shadow">
  <h2 class="text-lg font-semibold mb-4">ðŸ”” Recent Competitor Alerts</h2>
  <div class="overflow-x-auto">
    <table class="w-full text-left border-collapse">
      <thead>
        <tr class="bg-gray-100 text-gray-600">
          <th class="px-4 py-2">Product</th>
          <th class="px-4 py-2">Competitor</th>
          <th class="px-4 py-2">Old Price</th>
          <th class="px-4 py-2">New Price</th>
          <th class="px-4 py-2">Date</th>
        </tr>
      </thead>
      <tbody>
        <tr class="border-t">
          <td class="px-4 py-2">iPhone 15</td>
          <td class="px-4 py-2">Amazon</td>
          <td class="px-4 py-2">â‚¹79,999</td>
          <td class="px-4 py-2 text-green-600">â‚¹77,499</td>
          <td class="px-4 py-2">Today</td>
        </tr>
        <tr class="border-t">
          <td class="px-4 py-2">Samsung S24</td>
          <td class="px-4 py-2">Flipkart</td>
          <td class="px-4 py-2">â‚¹59,999</td>
          <td class="px-4 py-2 text-red-600">â‚¹61,499</td>
          <td class="px-4 py-2">Yesterday</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
{% endblock %}

{% block extra_scripts %}
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
// Line Chart - Price Trends
const ctx1 = document.getElementById('priceTrendChart').getContext('2d');
new Chart(ctx1, {
  type: 'line',
  data: {
    labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
    datasets: [
      { label: 'Amazon', data: [80, 78, 77, 79, 76, 75, 77], borderColor: '#3b82f6', fill: false },
      { label: 'Flipkart', data: [82, 81, 80, 79, 78, 77, 76], borderColor: '#f59e0b', fill: false }
    ]
  },
  options: { responsive: true, maintainAspectRatio: false }
});

// Pie Chart - Market Share
const ctx2 = document.getElementById('marketShareChart').getContext('2d');
new Chart(ctx2, {
  type: 'doughnut',
  data: {
    labels: ['Amazon', 'Flipkart', 'eBay'],
    datasets: [{
      data: [55, 30, 15],
      backgroundColor: ['#3b82f6', '#f59e0b', '#10b981']
    }]
  },
  options: { responsive: true, maintainAspectRatio: false }
});
</script>
{% endblock %}
